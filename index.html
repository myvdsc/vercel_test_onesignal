<!DOCTYPE html>
<html>
<head>
  <title>OneSignal Web Push Test</title>
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
</head>
<body>
  <h2>Test OneSignal Web Push</h2>
  <button onclick="subscribe()">ƒêƒÉng k√Ω nh·∫≠n th√¥ng b√°o</button>
  <pre id="log"></pre>

  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function(OneSignal) {
      await OneSignal.init({
        appId: "e672025e-a5ad-462e-9d01-8a15b6f4eaf1", // üëâ Thay b·∫±ng appId th·∫≠t
      });

      // Theo d√µi khi ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng k√Ω xong
      OneSignal.on('subscriptionChange', function (isSubscribed) {
        if (isSubscribed) {
          OneSignal.getUserId(function (playerId) {
            document.getElementById("log").textContent = "Player ID: " + playerId;
            console.log("Player ID:", playerId);
          });
        } else {
          document.getElementById("log").textContent = "User ch∆∞a cho ph√©p push";
        }
      });
    });

    // ‚úÖ H√†m subscribe ph·∫£i ƒë∆∞·ª£c khai b√°o ngo√†i push
    function subscribe() {
      window.OneSignal = window.OneSignal || [];
      OneSignal.push(function () {
        OneSignal.registerForPushNotifications();
      });
    }
  </script>
</body>
</html>
